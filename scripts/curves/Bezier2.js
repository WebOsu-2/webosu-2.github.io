define(["underscore","curves/CurveType"],(function(t,n){function i(t){n.call(this),this.points=t;for(var i=0,r=0;r<t.length-1;r++){var e=t[r].x-t[r+1].x,o=t[r].y-t[r+1].y;i+=Math.sqrt(e*e+o*o)}this.init(i)}return t.extend(i.prototype,n.prototype),i.prototype.pointAt=function(t){for(var n={x:0,y:0},r=this.points.length-1,e=0;e<=r;e++){var o=i.bernstein(e,r,t);n.x+=this.points[e].x*o,n.y+=this.points[e].y*o}return n},i.bernstein=function(t,n,r){return i.binomialCoefficient(n,t)*Math.pow(r,t)*Math.pow(1-r,n-t)},i.binomialCoefficient=function(t,n){if(n<0||n>t)return 0;if(0==n||n==t)return 1;n=Math.min(n,t-n);for(var i=1,r=0;r<n;r++)i=i*(t-r)/(r+1);return i},i}));