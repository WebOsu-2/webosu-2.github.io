define([],(function(){return function(a){var y={x:a.x,y:a.y},x={x:a.keyframes[0].x,y:a.keyframes[0].y},i={x:a.keyframes[1].x,y:a.keyframes[1].y},o=e(y,x),f=e(i,x),h=function(t,n,e,r){var a=r.x*n.y-r.y*n.x;if(Math.abs(a)<1e-5)return void console.warn("[curve] encountering straight P slider");var y=((e.y-t.y)*n.x+(t.x-e.x)*n.y)/a;return{x:e.x+r.x*y,y:e.y+r.y*y}}(o,t(n(x,y)),f,t(n(x,i)));if(!h)return[];var s=n(y,h),u=n(x,h),c=n(i,h),l=Math.atan2(s.y,s.x),M=Math.atan2(u.y,u.x),v=Math.atan2(c.y,c.x);const g=2*Math.PI;if(Math.PI,!r(l,M,v))if(Math.abs(l+g-v)<g&&r(l+g,M,v))l+=g;else if(Math.abs(l-(v+g))<g&&r(l,M,v+g))v+=g;else if(Math.abs(l-g-v)<g&&r(l-g,M,v))l-=g;else{if(!(Math.abs(l-(v-g))<g&&r(l,M,v-g)))throw"Cannot find angles between midAng.";v-=g}var b,p=(b=s,Math.sqrt(b.x*b.x+b.y*b.y)),A=Math.abs(l-v);let P=a.pixelLength/p;A>.97*P?A=P:console.warn("[curve] P shorter than given",A/P),v=v>l?l+A:l-A;var d=Math.floor(a.pixelLength/CURVE_POINTS_SEPERATION),m=new Array(d+1);pointAt=function(t){t>1&&(t=1);var n=function(t,n,e){return t*(1-e)+n*e}(l,v,t);return{x:Math.cos(n)*p+h.x,y:Math.sin(n)*p+h.y,t:t}};for(var w=0;w<m.length;w++)m[w]=pointAt(w/d);var k=0;for(let t=1;t<m.length;++t){let n=m[t].x-m[t-1].x,e=m[t].y-m[t-1].y;k+=Math.hypot(n,e)}return{curve:m,pointAt:pointAt,totalDistance:k}};function t(t){return{x:-t.y,y:t.x}}function n(t,n){return{x:t.x-n.x,y:t.y-n.y}}function e(t,n){return{x:(t.x+n.x)/2,y:(t.y+n.y)/2}}function r(t,n,e){return n>t&&n<e||n<t&&n>e}}));